<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Dashboard</title>
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    /* CSS inserted below */
  </style>
</head>
<body>
  <div class="sidebar" [class.hidden]="isSidebarHidden">

     <div class="logo-container">
    <img src="images/logo app.png" alt="LungApp Logo" class="logo-img" />
  </div>
    <ul>
  <li (click)="navigateToDashboard()" [class.active]="isActive('/admin-dashboard')" style="cursor:pointer;">
  <i class="fas fa-chart-line"></i>
  <span class="label">Dashboard</span>
</li>



<li (click)="navigateToProfile()" [class.active]="isActive('/admin/profile')" style="cursor: pointer;">
  <i class="fas fa-user"></i>
  <span class="label">My Profile</span>
</li>


  <li><i class="fas fa-procedures"></i><span class="label">Patient Management</span></li>
    <li (click)="navigateToDoctors()" [class.active]="isActive('/admin-doctor-management')" style="cursor: pointer;">
  <i class="fas fa-user-md"></i>
  <span class="label">Doctor Management</span>
  <li (click)="logout()">
  <i class="fas fa-sign-out-alt"></i>
  <span class="label">Sign Out</span>
</li>

</ul>

  </div>

  <div class="main">
    <div class="header">
      <div class="toggle-btn" (click)="toggleSidebar()">‚ò∞</div>
      <!-- LOGO -->
  

      <div class="admin-info">
  <img
    *ngIf="user?.profileImage"
    [src]="user.profileImage"
    alt="Profile Image"
    class="profile-img"
  />
  <span class="admin-name"> Admin: {{ user.firstName }} {{ user.lastName }}</span>
</div>

    </div>


  <div class="orders">
  <!-- Titre + Bouton Ajouter -->
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
    <h2 style="color: #0b1c36;">Patients List</h2>
    <button class="btn btn-add" (click)="navigateToAddPatient()">
  <i class="fas fa-plus"></i> Add Patient
</button>
  </div>

  <!-- Barre de recherche, limit, export -->
  <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px;">
    <input
      type="text"
      placeholder="üîç Rechercher..."
      class="search-input"
      [(ngModel)]="searchTerm"
    />
    <input
      type="number"
      min="1"
      [(ngModel)]="limit"
      placeholder="Afficher N lignes"
      class="limit-input"
    />
<button class="btn btn-export" (click)="exportCSV()">
  <i class="fas fa-file-csv"></i> Export CSV
</button>
<button class="btn btn-export" (click)="exportPDF()">
  <i class="fas fa-file-pdf"></i> Export PDF
</button>

  </div>

  <!-- Tableau -->
 <table>
  <thead>
    <tr>
      <th>ID</th>
      <th>profile image</th>
      <th>Name</th>
      <th>Email</th>
      <th>Telephone</th>
      <th>City</th>
      <th>Doctor in charge</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let patient of filteredPatients()">

      <td>{{ patient.id }} </td>
      <td>
        <!-- Thumbnail -->
<img 
  [src]="patient.profileImage" 
  class="profile-img" 
  width="40" 
  height="40" 
  (click)="openImageModal(patient.profileImage)" 
  style="cursor: pointer;"
/>

<!-- Modal -->
<div class="image-modal" *ngIf="showModal" (click)="closeImageModal()">
  <img [src]="selectedImage" class="full-image" />
</div>

      </td>
      <td>{{ patient.firstName }} {{ patient.lastName }}</td>
      <td>{{ patient.email }}</td>
      <td>{{ patient.phoneNumber }}</td>
      <td>{{ patient.city }}</td>
      <td>{{ patient.doctor || 'Non attribu√©' }}</td>
      <td>
        <button class="btn btn-view" (click)="viewMedicalFolder(patient.id)"><i class="fas fa-folder-open"></i></button>


        <button class="btn btn-edit" (click)="editPatient(patient.id)">
         <i class="fas fa-edit"></i>
        </button>

        <button class="btn btn-delete" (click)="deletePatient(patient.id)"><i class="fas fa-trash"></i></button>
      </td>
    </tr>
  </tbody>
</table>

</div>



      
    

    <!-- FOOTER -->
    <div class="footer">
      <p>&copy; 2025 Pulmo Precision AI. All rights reserved.</p>
    </div>
  </div>




</body>
</html>
